<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>参数 | vue-mixin-store</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="一套列表封装方案">
    <link rel="preload" href="/vue-mixin-store/assets/css/0.styles.f8f5d491.css" as="style"><link rel="preload" href="/vue-mixin-store/assets/js/app.e755d02f.js" as="script"><link rel="preload" href="/vue-mixin-store/assets/js/2.70750ae8.js" as="script"><link rel="preload" href="/vue-mixin-store/assets/js/7.eb7e6fee.js" as="script"><link rel="prefetch" href="/vue-mixin-store/assets/js/3.1073e3be.js"><link rel="prefetch" href="/vue-mixin-store/assets/js/4.7fcd476b.js"><link rel="prefetch" href="/vue-mixin-store/assets/js/5.53bfeab6.js"><link rel="prefetch" href="/vue-mixin-store/assets/js/6.41df3a33.js"><link rel="prefetch" href="/vue-mixin-store/assets/js/8.df47cb3d.js"><link rel="prefetch" href="/vue-mixin-store/assets/js/9.bb380bd9.js">
    <link rel="stylesheet" href="/vue-mixin-store/assets/css/0.styles.f8f5d491.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-mixin-store/" class="home-link router-link-active"><!----> <span class="site-name">vue-mixin-store</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-mixin-store/" class="nav-link">
  简介
</a></div><div class="nav-item"><a href="/vue-mixin-store/guide/" class="nav-link">
  快速上手
</a></div><div class="nav-item"><a href="/vue-mixin-store/params/" class="nav-link">
  参数
</a></div><div class="nav-item"><a href="/vue-mixin-store/scheme/" class="nav-link">
  返回值
</a></div><div class="nav-item"><a href="https://www.github.com/falstack/vue-mixin-store" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-mixin-store/" class="nav-link">
  简介
</a></div><div class="nav-item"><a href="/vue-mixin-store/guide/" class="nav-link">
  快速上手
</a></div><div class="nav-item"><a href="/vue-mixin-store/params/" class="nav-link">
  参数
</a></div><div class="nav-item"><a href="/vue-mixin-store/scheme/" class="nav-link">
  返回值
</a></div><div class="nav-item"><a href="https://www.github.com/falstack/vue-mixin-store" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vue-mixin-store/" class="sidebar-link">简介</a></li><li><a href="/vue-mixin-store/guide.html" class="sidebar-link">快速上手</a></li><li><a href="/vue-mixin-store/params.html" class="active sidebar-link">参数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-mixin-store/params.html#flowloader-的-props" class="sidebar-link">FlowLoader 的 props</a></li><li class="sidebar-sub-header"><a href="/vue-mixin-store/params.html#flowloader-的方法" class="sidebar-link">FlowLoader 的方法</a></li><li class="sidebar-sub-header"><a href="/vue-mixin-store/params.html#flowstore-透传的参数" class="sidebar-link">FlowStore 透传的参数</a></li></ul></li><li><a href="/vue-mixin-store/scheme.html" class="sidebar-link">返回值</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h1> <h2 id="flowloader-的-props"><a href="#flowloader-的-props" class="header-anchor">#</a> FlowLoader 的 props</h2> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>验证</th> <th>作用</th></tr></thead> <tbody><tr><td>func</td> <td>String</td> <td>true</td> <td>-</td> <td>-</td> <td>请求的 API 函数名</td></tr> <tr><td>type</td> <td>String</td> <td>true</td> <td>-</td> <td>page, jump, seenIds, lastId, sinceId</td> <td>API的翻页方式</td></tr> <tr><td>query</td> <td>Object</td> <td>false</td> <td>{}</td> <td>-</td> <td>透传给 API 层的参数</td></tr> <tr><td>auto</td> <td>Number</td> <td>false</td> <td>-1</td> <td>&gt;= -1</td> <td>自动加载的次数，-1 代表无限加载</td></tr> <tr><td>displayNoMore</td> <td>Boolean</td> <td>false</td> <td>false</td> <td>-</td> <td>当列表刷不出更多的时候，是否展示文字提示</td></tr> <tr><td>useFirstError</td> <td>Boolean</td> <td>false</td> <td>false</td> <td>-</td> <td>是否在首次加载失败时使用特殊的 slot</td></tr> <tr><td>useFirstLoading</td> <td>Boolean</td> <td>false</td> <td>false</td> <td>-</td> <td>是否在首次加载loading时使用特殊的 slot</td></tr> <tr><td>retryOnError</td> <td>Boolean</td> <td>false</td> <td>true</td> <td>-</td> <td>当展示 error 的时候是否点击后重试</td></tr> <tr><td>preload</td> <td>Number</td> <td>false</td> <td>50</td> <td>&gt;= 0</td> <td>自动加载下一页的预加载高度（px）</td></tr> <tr><td>callback</td> <td>Function</td> <td>false</td> <td>undefined</td> <td>Function</td> <td>接口请求成功后可以调用一个 callback 函数</td></tr> <tr><td>cacheTimeout</td> <td>Number</td> <td>false</td> <td>0</td> <td>&gt;= 0</td> <td>将数据缓存到 localStorage 里超时的秒数</td></tr> <tr><td>useRect</td> <td>Boolean</td> <td>false</td> <td>false</td> <td>-</td> <td>使用<code>getBoundingClientRect</code>来计算是否加载更多</td></tr> <tr><td>debug</td> <td>Boolean</td> <td>false</td> <td>false</td> <td>-</td> <td>在控制台输出 FlowLoader 的生命周期调用</td></tr></tbody></table> <h3 id="query-中的一些关键字"><a href="#query-中的一些关键字" class="header-anchor">#</a> query 中的一些关键字</h3> <table><thead><tr><th>参数</th> <th>作用</th></tr></thead> <tbody><tr><td>page</td> <td>在首次加载的时候可以传入 page，之后 store 会自动维护</td></tr> <tr><td>changing</td> <td>列表中每个 item 的 unique_id 的 key，默认是 id，可自定义其它 key，若 unique_id 在 object 的深层，使用<code>.</code>来分割</td></tr> <tr><td>is_up</td> <td>这个 key 由 FlowLoader 自动维护，默认为 false，只用在调用 <code>loadBefore</code> 时被设为 true，并透传给 API 层</td></tr> <tr><td>__refresh__，__reload__</td> <td>当调用 <code>refresh</code> 方法的时候会自动传这量个 key 来刷新 state，所以你不要使用它们</td></tr></tbody></table> <h2 id="flowloader-的方法"><a href="#flowloader-的方法" class="header-anchor">#</a> FlowLoader 的方法</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>以下方法使用 this.$refs.loader.xxx 调用</p></div> <h4 id="initdata"><a href="#initdata" class="header-anchor">#</a> initData()</h4> <ul><li>当auto设为0时，手动获取第一页的数据</li></ul> <h4 id="loadmore"><a href="#loadmore" class="header-anchor">#</a> loadMore()</h4> <ul><li>当auto设为0时，手动获取下一页的数据</li></ul> <h4 id="loadbefore"><a href="#loadbefore" class="header-anchor">#</a> loadBefore()</h4> <ul><li>当<code>type</code>=<code>sinceId</code>的时候，用来加载前面的数据</li></ul> <h4 id="refresh-reload-false"><a href="#refresh-reload-false" class="header-anchor">#</a> refresh(reload = false)</h4> <ul><li>刷新列表，该列表的原有数据会被清空</li> <li>当<code>reload</code>设置为 true 的时候，刷新的时候不展示 loading</li></ul> <h4 id="retry"><a href="#retry" class="header-anchor">#</a> retry()</h4> <ul><li>接口请求报错的时候，当 error-on-retry 设为 false 的时候手动调用来 retry</li></ul> <h4 id="clear"><a href="#clear" class="header-anchor">#</a> clear()</h4> <ul><li>手动将数据清空，但不发请求</li></ul> <h4 id="jump-page"><a href="#jump-page" class="header-anchor">#</a> jump(page)</h4> <ul><li>参数：page</li> <li>跳转到第几页，只应该在<code>type</code> =<code>jump</code> 的时候被调用</li></ul> <h4 id="update-id-key-value"><a href="#update-id-key-value" class="header-anchor">#</a> update({ id, key, value })</h4> <ul><li>参数[必选]：id（这里是键值，键名由 query 里的 changing 指定）</li> <li>参数[必选]：key（默认为空）</li> <li>参数[必选]：value</li> <li>改变<code>field</code>中某个<code>result</code>的某个值</li></ul> <h4 id="modify-key-value"><a href="#modify-key-value" class="header-anchor">#</a> modify({ key, value })</h4> <ul><li>参数[必选]：key（默认为空）</li> <li>参数[必选]：value</li> <li>改变该<code>field</code>的某个数据</li></ul> <h4 id="delete-id-key-changing"><a href="#delete-id-key-changing" class="header-anchor">#</a> delete(id, key, changing)</h4> <ul><li>参数[必选]：id（这里是键值，键名由 query 里的 changing 指定）</li> <li>参数[可选]：key 默认为<code>result</code></li> <li>参数[可选]：changing（优先级比 query 里的 changing 高，不支持<code>.</code>语法）</li> <li>删除列表中的某个元素</li></ul> <h4 id="prepend-data-key-changing"><a href="#prepend-data-key-changing" class="header-anchor">#</a> prepend(data, key, changing)</h4> <ul><li>参数[必选]：data（array|object）</li> <li>参数[可选]：key 默认为<code>result</code></li> <li>参数[可选]：changing（优先级比 query 里的 changing 高，不支持<code>.</code>语法）</li> <li>在列表的前面插入数据</li></ul> <h4 id="append-data-key-changing"><a href="#append-data-key-changing" class="header-anchor">#</a> append(data, key, changing)</h4> <ul><li>参数[必选]：data（array|object）</li> <li>参数[可选]：key 默认为<code>result</code></li> <li>参数[可选]：changing（优先级比 query 里的 changing 高，不支持<code>.</code>语法）</li> <li>在列表的后面插入数据</li></ul> <h4 id="insertbefore-id-value-key-changing"><a href="#insertbefore-id-value-key-changing" class="header-anchor">#</a> insertBefore({ id, value, key, changing })</h4> <ul><li>参数[必选]：id（列表中某个 item 的 id）</li> <li>参数[必选]：value（object）</li> <li>参数[可选]：key 默认为<code>result</code></li> <li>参数[可选]：changing（优先级比 query 里的 changing 高，不支持<code>.</code>语法）</li> <li>在列表的某个元素之前插入数据</li></ul> <h4 id="insertafter-id-value-key-changing"><a href="#insertafter-id-value-key-changing" class="header-anchor">#</a> insertAfter({ id, value, key, changing })</h4> <ul><li>参数[必选]：id（列表中某个 item 的 id）</li> <li>参数[必选]：value（object）</li> <li>参数[可选]：key 默认为<code>result</code></li> <li>参数[可选]：changing（优先级比 query 里的 changing 高，不支持<code>.</code>语法）</li> <li>在列表的某个元素之后插入数据</li></ul> <h4 id="patch-array-key-changing"><a href="#patch-array-key-changing" class="header-anchor">#</a> patch(array, key, changing)</h4> <ul><li>参数[必选]：value objectArray 或 array</li> <li>参数[可选]：key 默认为<code>result</code></li> <li>参数[可选]：changing（优先级比 query 里的 changing 高，不支持<code>.</code>语法）</li> <li>给原有的数据打补丁</li></ul> <h4 id="getresource-key-extra"><a href="#getresource-key-extra" class="header-anchor">#</a> getResource(key = 'extra')</h4> <ul><li>参数：key（要获取数据的key），<code>store</code>不存在时返回<code>undefined</code></li> <li>获取列表里的某个数据</li></ul> <h4 id="forcecallback"><a href="#forcecallback" class="header-anchor">#</a> forceCallback()</h4> <ul><li>参数：无</li> <li>强制调用 callback</li></ul> <h3 id="callback-的参数"><a href="#callback-的参数" class="header-anchor">#</a> callback 的参数</h3> <ol><li>params：请求的参数</li> <li>data：格式话后请求的响应值</li> <li>refresh：是否是刷新</li></ol> <h2 id="flowstore-透传的参数"><a href="#flowstore-透传的参数" class="header-anchor">#</a> FlowStore 透传的参数</h2> <table><thead><tr><th>Flow类型</th> <th>参数</th> <th>默认值</th> <th>翻页值</th></tr></thead> <tbody><tr><td>page</td> <td>page</td> <td>1</td> <td>自动维护，+1</td></tr> <tr><td>sinceId</td> <td>since_id, is_up</td> <td>is_up = 1, since_id = 999999999； is_up = 0, since_id = 0</td> <td>根据翻页方向自动维护</td></tr> <tr><td>jump</td> <td>page</td> <td>1</td> <td>手动传值</td></tr> <tr><td>lastId</td> <td>last_id</td> <td>0</td> <td>当前列表最后一个元素的 id 值</td></tr> <tr><td>seenIds</td> <td>seen_ids</td> <td>''</td> <td>当前列表所有元素的 id 值的数组然后 join(',')</td></tr> <tr><td>-</td> <td>_extra</td> <td>null</td> <td>field 里的附加数据</td></tr></tbody></table> <blockquote><p>当然也包括 query 里面提供的参数</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue-mixin-store/guide.html" class="prev">
        快速上手
      </a></span> <span class="next"><a href="/vue-mixin-store/scheme.html">
        返回值
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vue-mixin-store/assets/js/app.e755d02f.js" defer></script><script src="/vue-mixin-store/assets/js/2.70750ae8.js" defer></script><script src="/vue-mixin-store/assets/js/7.eb7e6fee.js" defer></script>
  </body>
</html>
